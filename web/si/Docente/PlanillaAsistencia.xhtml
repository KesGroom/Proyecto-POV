<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <!-- Se enlaza a los estilos proporcionados por el framework materialize -->
        <link href="../../Resources/css/materialize.min.css" rel="stylesheet" type="text/css"/>
        <!-- Se vincula los estilos css específicos de la página-->

        <!-- Este script se encarga de implementar los prefijos necesarios para algunas funciones y estilos
        de cada navegador, se coloca en el inicio ya que es necesario que cargue estos prefijos antes de que
        la página inicie para evitar fallos-->
        <script src="../../Resources/js/prefix.js" type="text/javascript"></script>
        <!-- Se incluye el icono del sistema -->
        <link rel="shorcut icon" href="../../Resources/img/Sistema/logoVersionFinal.png"/>
        <!-- Nombre que se visualizará en el navegador -->
        <title>Planilla Asistencia</title>
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0" />
    <!-- Se enlaza a los estilos proporcionados por el framework materialize -->
    <link href="../../Resources/css/materialize.min.css" rel="stylesheet" type="text/css"/>
    <!-- Se hace uso de la iconografía de fontawesome -->
    <link href="../../Resources/css/all.min.css" rel="stylesheet" type="text/css"/>
    <!-- Este script se encarga de implementar los prefijos necesarios para algunas funciones y estilos
    de cada navegador, se coloca en el inicio ya que es necesario que cargue estos prefijos antes de que la página inicie para evitar fallos-->
    
<script src="../../js/prefix.js"></script>
    <!-- Se importa la fuente seleccionada para el proyecto (Roboto) para que se muestre correctamente en todos los dispositivos-->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,700;1,400;1,500&amp;display=swap" rel="stylesheet" />
    <!-- Fuente secundaria usada para el proyecto -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans+Condensed:wght@700&amp;display=swap" rel="stylesheet" />
     <!-- Se incluye el icono del sistema -->
    <link rel="icon" type="image/png" href="/img/Sistema/logo version final.png" />
    
    
<title>Asistencia</title>
<!-- Se vincula los estilos css específicos de la página-->
    <link href="../../Resources/css/Estilos_Planilla.css" rel="stylesheet" type="text/css"/>
    </h:head>
    <h:body>
          <!-- Se encierra todo el contenido del body en un div con clase contenedor al cual se le asignaran las propiedades de flexbox -->
    <!-- Elemento Padre -->
    
        
        <!-- ELemento hijo de contenedor y elemento padre de su contenido -->
         <div class="Bread">
            <a href="">Principal</a>
          <ion-icon name="chevron-forward-outline"></ion-icon> 
            <a href="#">Usuario</a>
        </div>
        <main>
            
            
           
         <!-- Modal Trigger -->
  <a class="waves-effect waves-light btn modal-trigger red darken-4" href="#modal1">Registrar nuevo Estudiante</a>

  <!-- Modal Structure -->
  <div id="modal1" class="modal">
      <f:view>


            <h:form>
                <h1>Crear nueva asistencia</h1>
                <h:panelGrid columns="2">
                    <h:outputLabel value="IdRegistroAsistencia:" for="idRegistroAsistencia" />
                    <h:inputText id="idRegistroAsistencia" value="#{registro_asistenciaControladores.registroAsistencia.idRegistroAsistencia}" title="IdRegistroAsistencia" required="true" requiredMessage="The IdRegistroAsistencia field is required."/>
                    <h:outputLabel value="TemaTrabajado:" for="temaTrabajado" />
                    <h:inputTextarea rows="4" cols="30" id="temaTrabajado" value="#{registro_asistenciaControladores.registroAsistencia.temaTrabajado}" title="TemaTrabajado" required="true" requiredMessage="The TemaTrabajado field is required."/>
                    <h:outputLabel value="Fecha:" for="fecha" />
                    <h:inputText id="fecha" value="#{registro_asistenciaControladores.registroAsistencia.fecha}" title="Fecha" required="true" requiredMessage="The Fecha field is required.">
                        <f:convertDateTime pattern="MM/dd/yyyy" />
                    </h:inputText>
                    <h:outputLabel value="Asistencia:" for="asistencia" />
                    <h:inputText id="asistencia" value="#{registro_asistenciaControladores.registroAsistencia.asistencia}" title="Asistencia" required="true" requiredMessage="The Asistencia field is required."/>
                    <h:outputLabel value="Observaciones:" for="observaciones" />
                    <h:inputTextarea rows="4" cols="30" id="observaciones" value="#{registro_asistenciaControladores.registroAsistencia.observaciones}" title="Observaciones" />
                    <h:outputLabel value="DocenteMateria:" for="docenteMateria" />
                    <h:selectOneMenu id="docenteMateria" value="#{registro_asistenciaControladores.docenteMateria.idDocMat}" title="DocenteMateria" required="true" requiredMessage="The DocenteMateria field is required.">
                        <!-- TODO: update below reference to list of available items-->
                        <f:selectItems var="docemateria" value="#{docenteMateriaControladores.consultarDocenteMateria()}" itemLabel="#{docemateria.idDocMat}" itemValue="#{docemateria.idDocMat}" />
                    </h:selectOneMenu>
                    <h:outputLabel value="Estudiante:" for="estudiante" />
                    <h:selectOneMenu id="estudiante" value="#{registro_asistenciaControladores.estudiante.idEstudiante}" title="Estudiante" required="true" requiredMessage="The Estudiante field is required.">
                        <!-- TODO: update below reference to list of available items-->
                        <f:selectItems var="estudiante" value="#{estudianteControladores.consultarEstudiante()}" itemLabel="#{estudiante.idUsuario.nombre}" itemValue="#{estudiante.idEstudiante}"/>
                    </h:selectOneMenu>
                    <h:outputLabel value="Periodo:" for="periodo" />
                    <h:selectOneMenu id="periodo" value="#{registro_asistenciaControladores.periodo.idPeriodo}" title="Periodo" required="true" requiredMessage="The Periodo field is required.">
                        <!-- TODO: update below reference to list of available items-->
                        <f:selectItems var="periodo" value="#{periodoControladores.consultarPeriodo()}" itemLabel="#{periodo.idPeriodo}" itemValue="#{periodo.numeroPeriodo}"/>
                    </h:selectOneMenu>
                </h:panelGrid>
                <h:commandButton class="waves-effect waves-light btn" value="Registrar" action="#{registro_asistenciaControladores.registrarAsistencia()}" ></h:commandButton>
            </h:form>
        </f:view>

  </div>    
    <f:view>


        <h:form>
            <h1><h:outputText value="Lista de asistencia de personas"/></h1>
            <h:dataTable value="#{registro_asistenciaControladores.consultarAsistencia()}" var="RegistroAsistencia">
                
                <h:column >
                    <f:facet name="header">
                        <h:outputText value="TemaTrabajado"/>
                    </f:facet>
                    <h:outputText value="#{RegistroAsistencia.temaTrabajado}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Fecha"/>
                    </f:facet>
                    <h:outputText value="#{RegistroAsistencia.fecha}">
                        <f:convertDateTime pattern="MM/dd/yyyy" />
                    </h:outputText>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Asistencia"/>
                    </f:facet>
                    <h:outputText value="#{RegistroAsistencia.asistencia}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Observaciones"/>
                    </f:facet>
                    <h:outputText value="#{RegistroAsistencia.observaciones}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Docente"/>
                    </f:facet>
                    <h:outputText value="#{RegistroAsistencia.docenteMateria.idDocente.idUsuario.nombre}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Materia"/>
                    </f:facet>
                    <h:outputText value="#{RegistroAsistencia.docenteMateria.idMateria.materia}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Estudiante"/>
                    </f:facet>
                    <h:outputText value="#{RegistroAsistencia.estudiante.idUsuario.nombre}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Periodo"/>
                    </f:facet>
                    <h:outputText value="#{RegistroAsistencia.periodo.numeroPeriodo}"/>
                </h:column>
            </h:dataTable>
        </h:form>
    </f:view>

        
        </main>
        
        <!-- Se enlaza a las funciones y eventos proporcionados por el framework materialize -->
        <script src="../../Resources/js/materialize.min.js" type="text/javascript"></script>
        <!-- Se vincula al script AutoIniti el cual contiene el inicializador automático de los elementos de materialize -->
        <script>
            M.AutoInit();
        </script>
        <!-- Se hace uso de la iconografia de ionicons -->
        <script src="https://unpkg.com/ionicons@5.0.0/dist/ionicons.js"></script>
        <!-- Se vincula los scripts propios de la página-->
    </h:body>
</html>

